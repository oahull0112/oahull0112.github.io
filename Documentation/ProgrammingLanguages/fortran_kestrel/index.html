
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.6">
    
    
      
        <title>Fortran - OAH</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.50c56a3b.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 21h8v-8h-2v4.59L6.41 5H11V3H3v8h2V6.41L17.59 19H13v2Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fortran" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OAH" class="md-header__button md-logo" aria-label="OAH" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OAH
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Fortran
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../howto/" class="md-tabs__link">
        
  
    
  
  How-To

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Applications/vasp/" class="md-tabs__link">
          
  
    
  
  Documentation

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OAH" class="md-nav__button md-logo" aria-label="OAH" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    OAH
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-To
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Applications
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Applications/vasp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VASP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Applications/applications_template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Combined Module/Build Template
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Applications/berkeleygw_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BerkeleyGW Combined Module/Build Example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Applications/berkeleygw_module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BerkeleyGW Module Example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Applications/berkeleygw_build/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BerkeleyGW Build Example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Applications/applications_template_module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Module Template
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Applications/applications_template_build/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Build Template
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Programming Languages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Programming Languages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fortran/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fortran Example
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Libraries
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Libraries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Libraries/intro_libraries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Libraries/howto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Libraries How-to
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Libraries/intro_libraries#mkl" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MKL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Libraries/intro_libraries#libsci" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LibSci
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Libraries/intro_libraries#fftw" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FFTW
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Libraries/intro_libraries#lapack-and-scalapack" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LAPACK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Libraries/intro_libraries#hdf5" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HDF5
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Debugging/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Debugging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Debugging/ddt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DDT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Debugging/gdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GDB
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hello-world" class="md-nav__link">
    <span class="md-ellipsis">
      Hello World
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hello-world-in-mpi-parallel" class="md-nav__link">
    <span class="md-ellipsis">
      Hello World in MPI Parallel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Compilers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compilers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standalone-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Standalone compilers:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programming-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Programming Environments:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fortran-mpi-compilers" class="md-nav__link">
    <span class="md-ellipsis">
      Fortran-MPI compilers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#external-resources" class="md-nav__link">
    <span class="md-ellipsis">
      External Resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="fortran">Fortran<a class="headerlink" href="#fortran" title="Permanent link">#</a></h1>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">#</a></h2>
<p>This section provides the minimum amount of information necessary to successfully compile a basic Fortran code, and then a basic Fortran MPI code. See <a href="https://nrel.gov">External Resources</a> for general Fortran language tutorials and Fortran-MPI tutorials. See <a href="#compilers">Compilers</a> for detailed compiler and programming environment information.</p>
<h3 id="hello-world">Hello World<a class="headerlink" href="#hello-world" title="Permanent link">#</a></h3>
<p>First, we must choose the compiler with which to compile our program. We can choose between the GNU, Intel, Nvidia, and Cray compilers. </p>
<p>To see available versions of a chosen compiler, use <code>module avail</code>. For this example, we'll use gfortran, which is part of GNU's <code>gcc</code> package:</p>
<div class="highlight"><pre><span></span><code>module avail gcc
   gcc/10.3.0          gcc/11.2.0          gcc/12.1.0(default)
</code></pre></div>
<p>To load a particular compiler, use <code>module load</code>. We'll use gcc/12.1.0.</p>
<div class="highlight"><pre><span></span><code>module load gcc/12.1.0
</code></pre></div>
<p>Create a file named hello.f90, and save the following text to the file:</p>
<div class="highlight"><pre><span></span><code>PROGRAM hello

write(*,*) &quot;Hello World&quot;

END PROGRAM hello
</code></pre></div>
<p>Now, we can compile the program with the following command:</p>
<p><code>gfortran hello.f90 -o hello</code></p>
<p>This creates an executable named <code>hello</code>. Execute it by typing the following into your terminal:</p>
<p><code>./hello</code></p>
<p>It should return the following output:</p>
<p><code>Hello World</code></p>
<h3 id="hello-world-in-mpi-parallel">Hello World in MPI Parallel<a class="headerlink" href="#hello-world-in-mpi-parallel" title="Permanent link">#</a></h3>
<p>Now that we have a working Hello World program, let's modify it to run on multiple MPI tasks.</p>
<p>On Kestrel, there are multiple implementations of MPI available. We can choose between OpenMPI, Intel MPI, MPICH, and Cray MPICH. These MPI implementations are associated with an underlying Fortran compiler. For example, if we type:</p>
<p><code>module avail openmpi</code></p>
<p>we find that both <code>openmpi/4.1.4-gcc</code> and <code>openmpi/4.1.4-intel</code> are available.</p>
<p>Let's choose the openmpi/gcc combination:</p>
<p><code>module load openmpi/4.1.4-gcc</code></p>
<p>Now, create a new file named <code>hello_mpi.f90</code> and save the following contents to the file:</p>
<div class="highlight"><pre><span></span><code>PROGRAM hello_mpi
include &#39;mpif.h&#39;

integer :: ierr, my_rank, number_of_ranks

call MPI_INIT(ierr)
call MPI_COMM_SIZE(MPI_COMM_WORLD, number_of_ranks, ierr)
call MPI_COMM_RANK(MPI_COMM_WORLD, my_rank, ierr)

write(*,*) &quot;Hello World from MPI task: &quot;, my_rank, &quot;out of &quot;, number_of_ranks

call MPI_FINALIZE(ierr)

END PROGRAM hello_mpi
</code></pre></div>
<p>To compile this program, type:</p>
<p><code>mpif90 hello_mpi.f90 -o hello_mpi</code></p>
<p>To run this code on the login node, type:</p>
<p><code>mpirun -n 4 ./hello_mpi</code></p>
<p>You should receive a similar output to the following (the rank ordering may differ):</p>
<div class="highlight"><pre><span></span><code> Hello World from MPI task:            1 out of            4
 Hello World from MPI task:            2 out of            4
 Hello World from MPI task:            3 out of            4
 Hello World from MPI task:            0 out of            4
</code></pre></div>
<p>Generally, we don't want to run MPI programs on the login node! Let's submit this code as a job. Create a file named <code>job.in</code> and modify the file to contain the following:</p>
<div class="highlight"><pre><span></span><code>#!/bin/bash

#SBATCH --time=00:01:00
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=4
#SBATCH --partition=debug
#SBATCH --account=

module load openmpi/4.1.4-gcc

srun -n 4 ./hello_mpi &amp;&gt; hello.out
</code></pre></div>
<p>Submit the job by typing:</p>
<p><code>sbatch job.in</code></p>
<p>When the job is done, the file hello.out should contain the same output as you found before (the ordering of ranks may differ).</p>
<h2 id="compilers">Compilers<a class="headerlink" href="#compilers" title="Permanent link">#</a></h2>
<h3 id="standalone-compilers">Standalone compilers:<a class="headerlink" href="#standalone-compilers" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align: center;">Compiler</th>
<th style="text-align: center;">Compiler Executable</th>
<th style="text-align: center;">Module Avail</th>
<th style="text-align: center;">Available Versions</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">GNU (gcc)</td>
<td style="text-align: center;">gfortran</td>
<td style="text-align: center;">gcc</td>
<td style="text-align: center;">12.1.0, 11.2.0, 10.3.0, 10.1.0</td>
</tr>
<tr>
<td style="text-align: center;">Intel</td>
<td style="text-align: center;">ifort</td>
<td style="text-align: center;">intel-oneapi</td>
<td style="text-align: center;">2023.0.0, 2022.1.0, 2021.8.0</td>
</tr>
<tr>
<td style="text-align: center;">Intel</td>
<td style="text-align: center;">ifort</td>
<td style="text-align: center;">intel-classic</td>
<td style="text-align: center;">2022.1.0</td>
</tr>
<tr>
<td style="text-align: center;">Cray</td>
<td style="text-align: center;">ftn</td>
<td style="text-align: center;">cce</td>
<td style="text-align: center;">14.0.4</td>
</tr>
<tr>
<td style="text-align: center;">Nvidia (nvhpc)</td>
<td style="text-align: center;">nvfortran</td>
<td style="text-align: center;">nvhpc</td>
<td style="text-align: center;">22.7</td>
</tr>
</tbody>
</table>
<h3 id="programming-environments">Programming Environments:<a class="headerlink" href="#programming-environments" title="Permanent link">#</a></h3>
<p>Note that in addition to the standalone Fortran compilers listed above, the various available programming environments available on the HPC (use <code>module avail PrgEnv</code> to view available programming environments) contain an associated Fortran compiler. For example, <code>module load PrgEnv-gnu/8.3.3</code> will load gfortran/12.1.0 into your environment, which you can verify with the <code>gfortran --version</code> command. If using a PrgEnv from a given creator, the loaded fortran compiler executable will be given by the same name as listed in the above table.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Creator</th>
<th style="text-align: center;">Compiler Executable</th>
<th style="text-align: center;">Module Avail</th>
<th style="text-align: center;">Fortran Compiler Version</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">GNU</td>
<td style="text-align: center;">gfortran</td>
<td style="text-align: center;">PrgEnv-gnu/8.3.3</td>
<td style="text-align: center;">12.1.0</td>
</tr>
<tr>
<td style="text-align: center;">GNU</td>
<td style="text-align: center;">gfortran</td>
<td style="text-align: center;">PrgEnv-gnu-amd/8.3.3</td>
<td style="text-align: center;">broken?</td>
</tr>
<tr>
<td style="text-align: center;">Intel</td>
<td style="text-align: center;">ifort</td>
<td style="text-align: center;">PrgEnv-intel/8.3.3</td>
<td style="text-align: center;">2021.6.0</td>
</tr>
<tr>
<td style="text-align: center;">Cray</td>
<td style="text-align: center;">ftn</td>
<td style="text-align: center;">PrgEnv-Cray/8.3.3</td>
<td style="text-align: center;">14.0.4</td>
</tr>
<tr>
<td style="text-align: center;">Nvidia</td>
<td style="text-align: center;">nvfortran</td>
<td style="text-align: center;">PrgEnv-nvhpc/8.3.3</td>
<td style="text-align: center;">22.7.0</td>
</tr>
<tr>
<td style="text-align: center;">Nvidia</td>
<td style="text-align: center;">nvfortran</td>
<td style="text-align: center;">PrgEnv-nvidia/8.3.3</td>
<td style="text-align: center;">broken?</td>
</tr>
</tbody>
</table>
<h3 id="fortran-mpi-compilers">Fortran-MPI compilers<a class="headerlink" href="#fortran-mpi-compilers" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align: center;">Compiler</th>
<th style="text-align: center;">MPI</th>
<th style="text-align: center;">Compiler Executable</th>
<th style="text-align: center;">Module Avail</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">GNU (gcc)</td>
<td style="text-align: center;">openmpi</td>
<td style="text-align: center;">mpifort</td>
<td style="text-align: center;">openmpi/4.1.4-gcc</td>
</tr>
<tr>
<td style="text-align: center;">intel</td>
<td style="text-align: center;">openmpi</td>
<td style="text-align: center;">mpifort</td>
<td style="text-align: center;">openmpi/4.1.4-intel</td>
</tr>
<tr>
<td style="text-align: center;">intel</td>
<td style="text-align: center;">intel</td>
<td style="text-align: center;">mpiifort</td>
<td style="text-align: center;">intel-oneapi-mpi/2021.8.0-intel</td>
</tr>
<tr>
<td style="text-align: center;">gcc</td>
<td style="text-align: center;">MPICH</td>
<td style="text-align: center;">mpifort</td>
<td style="text-align: center;">mpich/4.0.2-gcc</td>
</tr>
<tr>
<td style="text-align: center;">intel</td>
<td style="text-align: center;">MPICH</td>
<td style="text-align: center;">mpifort</td>
<td style="text-align: center;">mpich/4.0.2-intel</td>
</tr>
<tr>
<td style="text-align: center;">cray</td>
<td style="text-align: center;">MPICH</td>
<td style="text-align: center;">ftn</td>
<td style="text-align: center;">cray-mpich/8.1.20</td>
</tr>
</tbody>
</table>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">#</a></h2>
<p>Include known problems and workarounds here, if applicable</p>
<h2 id="external-resources">External Resources<a class="headerlink" href="#external-resources" title="Permanent link">#</a></h2>
<ul>
<li><a href="https://pages.mtu.edu/~shene/COURSES/cs201/NOTES/fortran.html">Basic Fortran Tutorial</a> </li>
<li><a href="https://curc.readthedocs.io/en/latest/programming/MPI-Fortran.html">Fortran/MPI on an HPC Tutorial</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.path", "toc.follow"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e1c3ead8.min.js"></script>
      
    
  </body>
</html>